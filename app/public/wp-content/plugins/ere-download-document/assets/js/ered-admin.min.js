!function(e){"use strict";var t={_ajaxRequesting:!1,$trEdit:null,init:function(){this.openPopup(),this.saveEmail(),this.deleteEmail()},openPopup:function(){var a={type:"inline",closeOnBgClick:!1,closeBtnInside:!0,mainClass:"mfp-zoom-in",midClick:!0,callbacks:{open:function(){var a=e(this.currItem.el),i=a.closest("tr"),n=i.find(".td-email"),d=i.find(".td-name");t.$trEdit=i,e("#ered-change-info-form").find('[name="id"]').val(a.data("id")),e("#ered-change-info-form").find('[name="name"]').val(d.text()),e("#ered-change-info-form").find('[name="email"]').val(n.text())}}};e(".ered-change-email").magnificPopup(a)},saveEmail:function(){e("#ered-change-info-form").on("submit",function(a){if(a.preventDefault(),!t._ajaxRequesting){t._ajaxRequesting=!0;var i=this,n=new FormData(this);return i._ladda=Ladda.create(e(this).find('[type="submit"]')[0]),i._ladda.start(),e.ajax({type:"POST",url:this.action,data:n,processData:!1,contentType:!1,success:function(a){if(a.success){t.$trEdit.find(".td-name").text(a.data.name),t.$trEdit.find(".td-email").text(a.data.email);var n=t.$trEdit;n.addClass("highlight-color"),setTimeout(function(){n.removeClass("highlight-color")},500),e(i).closest("#ered_edit_info_popup").find(" > .mfp-close").trigger("click")}else alert(a.data)},error:function(){},complete:function(){t._ajaxRequesting=!1,i._ladda&&i._ladda.stop()}}),!1}})},deleteEmail:function(){e(".ered-delete-email").on("click",function(a){if(a.preventDefault(),!t._ajaxRequesting&&(t._ajaxRequesting=!0,confirm("Are your sure to delete?"))){var i=e(this),n=Ladda.create(this);n.start(),e.ajax({type:"POST",url:i.data("url"),data:{id:i.data("id"),ered_delete_email_nonce:i.data("nonce")},success:function(t){t.success?i.closest("tr").fadeOut(function(){e(this).remove()}):alert(t.data)},complete:function(){t._ajaxRequesting=!1,n&&n.stop()}})}})}};e(document).ready(function(){t.init()})}(jQuery);